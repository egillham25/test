"use strict";(self.webpackChunk_grammarly_denali_app=self.webpackChunk_grammarly_denali_app||[]).push([[7254],{65772:(e,t,i)=>{i.d(t,{G:()=>h});var s=i(83531),n=i(19147),o=i(23988),r=i(1059),h=function e(t,i){var h=this;(0,n._)(this,e),(0,o._)(this,"_innerWSHandler",void 0),(0,o._)(this,"accessToken",void 0),(0,o._)(this,"onConnecting",void 0),(0,o._)(this,"onConnect",void 0),(0,o._)(this,"onDisconnect",void 0),(0,o._)(this,"onMessage",void 0),(0,o._)(this,"connect",void 0),(0,o._)(this,"isDisconnected",void 0),this._innerWSHandler=t,this.accessToken=i,this.onConnecting=function(e){return h._innerWSHandler.onConnecting(e),h},this.onConnect=function(e){return h._innerWSHandler.onConnect(e),h},this.onDisconnect=function(e){return h._innerWSHandler.onDisconnect(e),h},this.onMessage=function(e){return h._innerWSHandler.onMessage(e),h};var d,a=this;this.connect=(d=(0,s._)((function(e){var t,i,s;return(0,r.YH)(this,(function(n){switch(n.label){case 0:return"function"!=typeof a.accessToken?[3,2]:[4,a.accessToken()];case 1:return i=n.sent(),[3,3];case 2:i=void 0,n.label=3;case 3:return void 0!==(t=i)&&((s=new URL(e)).searchParams.append("accessToken",t),e=s.toString()),[2,a._innerWSHandler.connect(e)]}}))})),function(e){return d.apply(this,arguments)}),this.isDisconnected=function(){return h._innerWSHandler.isDisconnected()}}},52267:(e,t,i)=>{i.d(t,{ai:()=>G});var s=i(23988),n=i(44869),o=i(38260),r=i(84647),h=i(87172),d=i(72896),a=i(11924),l=i(79937),c=i(366),_=i(57836),u=i(42279),p=i(34553),v=i(40171),y=i(33011),f=i(11534),k=i(63687),b=i(91745),m=i(81753),g=i(99339),w=i(7149),H=i(99010),S=i(5406),C=i(22013);class G{dispose(){this._subs.dispose()}_bindSources(e){const t=(0,r.pipe)(this._createHotkey,C.L.combineProviders(e),o.Tj((e=>e.isActive.pipe(l.n(c.vh(e.bind(this._bindHotkey(e.hotkey).pipe(_.u(e.action)))))))));this._subs.push(u.h(...t).subscribe())}constructor(e,t,i){(0,s._)(this,"bindingSources",void 0),(0,s._)(this,"_isAppleSystem",void 0),(0,s._)(this,"_registeredHotkeys",void 0),(0,s._)(this,"_hotkeyEvents",void 0),(0,s._)(this,"_subs",void 0),(0,s._)(this,"_logger",void 0),(0,s._)(this,"_modifiers",void 0),(0,s._)(this,"modifiersPressed",void 0),(0,s._)(this,"_createHotkey",void 0),(0,s._)(this,"_bindHotkey",void 0),(0,s._)(this,"_handleGlobalEvent",void 0),(0,s._)(this,"_listenGlobalInput",void 0),(0,s._)(this,"_listenGlobalKeyUp",void 0),(0,s._)(this,"_listenGlobalKeydown",void 0),this.bindingSources=e,this._isAppleSystem=t,this._registeredHotkeys=new Map,this._hotkeyEvents=new p.B,this._subs=new v.y.Keeper,this._logger=h.Bx.Logging.getLogger("hotkeyManager"),this._modifiers=new y.t(new Set),this.modifiersPressed=this._modifiers.pipe(f.fY(n.ee(d._3))),this._createHotkey=e=>{const{key:t,modifiers:i,source:s=a._.Keydown,preventDefault:n=!0}=e;return{id:E(),key:t.toLowerCase(),modifiers:i,source:s,preventDefault:n,toString:()=>C.L.HotkeyOptions.toString(this._isAppleSystem)(e)}},this._bindHotkey=e=>k.v((()=>(this._registeredHotkeys.set(e.id,e),this._hotkeyEvents.pipe(b.p((t=>t===e.id)),_.u(c.q6))))).pipe(m.j((()=>{this._registeredHotkeys.delete(e.id)}))),this._handleGlobalEvent=(e,t)=>{const i=Array.from(this._registeredHotkeys.values()).filter(t);if(0===i.length)return;if(i.length>1)return void this._logger.error(`Multiple hotkeys registered in the same context: ${i}`);const s=i[0];this._hotkeyEvents.next(s.id),s.preventDefault&&e.preventDefault()},this._listenGlobalInput=()=>g.R(document,"input").subscribe((e=>{const t=e;if("historyUndo"===t.inputType){const t=e=>"UNDO"===e.key;this._handleGlobalEvent(e,t)}else if("historyRedo"===t.inputType){const t=e=>"REDO"===e.key;this._handleGlobalEvent(e,t)}})),this._listenGlobalKeyUp=e=>g.R(document,"keyup").pipe(w.T(e),H.M((e=>this._modifiers.next(e)))).subscribe(),this._listenGlobalKeydown=e=>g.R(document,"keydown").subscribe((t=>{var i;const s=e(t),n=(o={short:s.has(a.l.short),alt:s.has(a.l.alt),shift:s.has(a.l.shift),key:null===(i=t.key)||void 0===i?void 0:i.toLowerCase(),keyCode:t.which||t.keyCode},e=>e.modifiers.has(a.l.short)===o.short&&e.modifiers.has(a.l.alt)===o.alt&&e.modifiers.has(a.l.shift)===o.shift&&(e.key===o.key||e.modifiers.size>0&&e.key===String.fromCharCode(o.keyCode)));var o;this._modifiers.next(s),this._handleGlobalEvent(t,n)})),this._bindSources(e);const o=(r=t,e=>{const t=new Set;return(r?e.metaKey&&!e.ctrlKey:e.ctrlKey&&!e.metaKey)&&t.add(a.l.short),e.altKey&&t.add(a.l.alt),e.shiftKey&&t.add(a.l.shift),t});var r;this._subs.push(this._listenGlobalKeydown(o),this._listenGlobalKeyUp(o)),i&&this._subs.push(this._listenGlobalInput())}}const E=(()=>{let e=1;return()=>e++})();var K;!function(e){e.Mock=class{constructor(){(0,s._)(this,"modifiersPressed",S.w),(0,s._)(this,"dispose",r.constVoid)}}}(K||(K={}))},58052:(e,t,i)=>{var s,n;i.d(t,{t:()=>s}),(n=s||(s={})).from=e=>e,n.of=(...e)=>(0,n.from)(e)},35736:(e,t,i)=>{i.d(t,{l:()=>n});var s=i(85886);const n=(0,i(95140).w)("color",(({title:e,titleId:t,desc:i,descId:n,...o})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDocument",stroke:"transparent","aria-labelledby":t,"aria-describedby":n,...o},i?s.createElement("desc",{id:n},i):null,e?s.createElement("title",{id:t},e):null,s.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M5.5 4.4h5m-5 2.4h5m-5 2.4h5m-5 2.4H8M4.25 14h7.5c.69 0 1.25-.56 1.25-1.25v-9.5C13 2.56 12.44 2 11.75 2h-7.5C3.56 2 3 2.56 3 3.25v9.5c0 .69.56 1.25 1.25 1.25"}))))}}]);